(function(c){c.fn.suggestMail=function(n){var h=c(this),a=null,j=null;h.keydown(function(b){b=b.which;if(9==b||38==b||39==b||40==b||13==b)a:{var d=m(),e=c(".ui-suggest-container"),f=c(".ui-suggest-item");d?e.is(":hidden")&&(e.show(),a.addClass("state-hover")):a=null;if(a)if(a.removeClass("state-hover"),38==b)if(b=a.prev().length?a.prev():null)a=b;else{a=null;g(!1,j);break a}else 39==b||9==b?g(!0):40==b?(a=a.next().length?a.next():a,g()):a&&g(!0);else f.length&&(38==b?f.last():40==b?a=f.first():9==
    b&&c(".ui-suggest-container").hide());a&&a.addClass("state-hover")}else setTimeout(function(){j=h.val();if(2<j.length&&0<j.indexOf("@")){var b=j.split("@")[0],d=j.split("@")[1];if(""!=d){var e="",g=[];c.grep(n,function(a){if(0==a.indexOf(d))return a=b+"@"+a,e+='<div class="ui-suggest-item">'+a+"</div>",g.push(a)});var f=e,k=c(".ui-suggest-container").length?c(".ui-suggest-container"):c("<div>").addClass("ui-suggest-container");k.html(f);var l=h.offset(),f=h.outerWidth()-2,p=l.left,l=l.top+h.outerHeight();
    k.css({width:f,top:l,left:p}).appendTo("body");m();e?k.show():k.html("").hide()}else a=null,c(".ui-suggest-container").html("").hide()}},100)});c(".ui-suggest-item").live({mouseenter:function(){c(this).addClass("state-hover")},mouseleave:function(){c(this).removeClass("state-hover")}});c(".ui-suggest-item").live("click",function(){a=c(this);g(!0)});var g=function(b,d){d=d||a.text();h.val(d);b&&c(".ui-suggest-container").hide()},m=function(){if(a){var b=c(".ui-suggest-container").find("div"),d=a.text(),
    e=!1;b.each(function(){d==c(this).text()&&(e=!0,a=c(this),a.addClass("state-hover"))});return e}}}})(jQuery);